<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Bash plus Slack | Virtualbeck's Blog</title>
<meta name=keywords content="slack,bash"><meta name=description content="Let’s write a script to take and upload pictures"><meta name=author content="Mike"><link rel=canonical href=https://blog.virtualbeck.com/posts/slack-and-bash/><link crossorigin=anonymous href=/assets/css/stylesheet.2c5d642fd43214ad28cb70ee2024b8caf116931b93748e3f059b271affbecd19.css integrity="sha256-LF1kL9QyFK0oy3DuICS4yvEWkxuTdI4/BZsnGv++zRk=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.virtualbeck.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.virtualbeck.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.virtualbeck.com/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.virtualbeck.com/apple-touch-icon.png><link rel=mask-icon href=https://blog.virtualbeck.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.virtualbeck.com/posts/slack-and-bash/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Bash plus Slack"><meta property="og:description" content="Let’s write a script to take and upload pictures"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.virtualbeck.com/posts/slack-and-bash/"><meta property="og:image" content="https://blog.virtualbeck.com/static/mike.webp"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-12-27T00:00:00+00:00"><meta property="article:modified_time" content="2019-12-27T00:00:00+00:00"><meta property="og:site_name" content="virtualbeck's blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.virtualbeck.com/static/mike.webp"><meta name=twitter:title content="Bash plus Slack"><meta name=twitter:description content="Let’s write a script to take and upload pictures"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.virtualbeck.com/posts/"},{"@type":"ListItem","position":2,"name":"Bash plus Slack","item":"https://blog.virtualbeck.com/posts/slack-and-bash/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Bash plus Slack","name":"Bash plus Slack","description":"Let’s write a script to take and upload pictures\n","keywords":["slack","bash"],"articleBody":"Let’s write a script to take and upload pictures\nBash scripting has always been my goto tool in my line of work. My friend wanted to have his Slack profile picture updated every 5 mins, so he wrote a program in Go to accomplish this. I am not that savvy with Go (yet), and I wanted to do my own implementation in Bash. Below is the code, only 4 lines really. Let’s look at each line and see what it is going on.\n# !/bin/bash # Upload a new picture to Slack profile to indicate your presence # put it in your crontab to send every 5 mins # */5 8–17 * * 1–5 /home/mike/slackProfilePic.sh # capture image from webcam (use /dev/video0 for default webcam) streamer -f jpeg -o /home/mike/image.jpeg -c /dev/video1 # introduce blur convert -blur 0x2 /home/mike/image.jpeg /home/mike/image.jpeg # send to slack (get your slack token here: https://api.slack.com/custom-integrations/legacy-tokens) curl https://slack.com/api/users.setPhoto -F “image=@/home/mike/image.jpeg” -F “token=xoxp-123–456–789” # remove image rm /home/mike/image.jpeg Walkthrough #!/bin/bash This is called the shebang, and it just tells the computer where the program bash lives. Any line that starts with a # means that is it a comment # */5 8–17 * * 1–5 slackProfilePic.sh is a comment, but also an example of how the script can be ran by the computer over and over on a cadence by cron (more here). This specific cron entry will run every 5 mins between the hours of 8am and 5pm, Monday through Friday. streamer -f jpeg -o /home/mike/image.jpeg -c /dev/video1 The capture line. Streamer is a program that captures audio/video. We are using it to just grab one frame from our webcam, and store it on disk in jpeg format. Read more about streamer here. convert -blur 0x2 /home/mike/image.jpeg /home/mike/image.jpeg The blur line (optional). This line was included to introduce a bit of blur to the newly captured image. I wanted to convey presence without sacrificing privacy. You may choose to change the amount of blur or do something completely different before uploading to Slack. Read more about convert here]. curl https://slack.com/api/users.setPhoto -F “image=@/home/mike/image.jpeg” -F “token=xoxp-123–456–789” The upload line. Here, a curl request is used to send the new image to your Slack profile picture, using your Slack token. Much more can be found here about curl, and you can get your own token (and replace this one) here. rm /home/mike/image.jpeg The cleanup line. This line merely removes the local copy of the image we just uploaded to Slack. That’s it! I hope you found this useful, and are able to convey your online presence (or lack thereof) using the tools available through Linux.\n","wordCount":"436","inLanguage":"en","image":"https://blog.virtualbeck.com/static/mike.webp","datePublished":"2019-12-27T00:00:00Z","dateModified":"2019-12-27T00:00:00Z","author":{"@type":"Person","name":"Mike"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.virtualbeck.com/posts/slack-and-bash/"},"publisher":{"@type":"Organization","name":"Virtualbeck's Blog","logo":{"@type":"ImageObject","url":"https://blog.virtualbeck.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.virtualbeck.com/ accesskey=h title="Virtualbeck's Blog (Alt + H)"><img src=https://blog.virtualbeck.com/mike.webp alt aria-label=logo height=36 width=36>Virtualbeck's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.virtualbeck.com/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://blog.virtualbeck.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://blog.virtualbeck.com/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://blog.virtualbeck.com/about/ title=About><span>About</span></a></li><li><a href=https://sudoku.virtualbeck.com/ title=Sudoku><span>Sudoku</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://blog.virtualbeck.com/ai_slop/ title=ai_slop><span>ai_slop</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.virtualbeck.com/>Home</a>&nbsp;»&nbsp;<a href=https://blog.virtualbeck.com/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Bash plus Slack</h1><div class=post-meta><span title='2019-12-27 00:00:00 +0000 UTC'>December 27, 2019</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;436 words&nbsp;·&nbsp;Mike&nbsp;|&nbsp;<a href=https://github.com/virtualbeck/website/tree/main/content/posts/slack-and-bash.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>Let’s write a script to take and upload pictures</p><p>Bash scripting has always been my goto tool in my line of work. My friend wanted to have his Slack profile picture updated every 5 mins, so he wrote a program in Go to accomplish this. I am not that savvy with Go (yet), and I wanted to do my own implementation in Bash. Below is the code, only 4 lines really. Let’s look at each line and see what it is going on.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=c1># !/bin/bash</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Upload a new picture to Slack profile to indicate your presence</span>
</span></span><span class=line><span class=cl><span class=c1># put it in your crontab to send every 5 mins</span>
</span></span><span class=line><span class=cl><span class=c1># */5 8–17 * * 1–5 /home/mike/slackProfilePic.sh</span>
</span></span><span class=line><span class=cl><span class=c1># capture image from webcam (use /dev/video0 for default webcam)</span>
</span></span><span class=line><span class=cl><span class=n>streamer</span> <span class=o>-</span><span class=n>f</span> <span class=n>jpeg</span> <span class=o>-</span><span class=n>o</span> <span class=o>/</span><span class=n>home</span><span class=o>/</span><span class=n>mike</span><span class=o>/</span><span class=n>image</span><span class=o>.</span><span class=n>jpeg</span> <span class=o>-</span><span class=n>c</span> <span class=o>/</span><span class=n>dev</span><span class=o>/</span><span class=n>video1</span>
</span></span><span class=line><span class=cl><span class=c1># introduce blur</span>
</span></span><span class=line><span class=cl><span class=nb>convert</span> <span class=o>-</span><span class=n>blur</span> <span class=mh>0x2</span> <span class=o>/</span><span class=n>home</span><span class=o>/</span><span class=n>mike</span><span class=o>/</span><span class=n>image</span><span class=o>.</span><span class=n>jpeg</span> <span class=o>/</span><span class=n>home</span><span class=o>/</span><span class=n>mike</span><span class=o>/</span><span class=n>image</span><span class=o>.</span><span class=n>jpeg</span>
</span></span><span class=line><span class=cl><span class=c1># send to slack (get your slack token here: https://api.slack.com/custom-integrations/legacy-tokens)</span>
</span></span><span class=line><span class=cl><span class=n>curl</span> <span class=n>https</span><span class=p>:</span><span class=o>//</span><span class=n>slack</span><span class=o>.</span><span class=n>com</span><span class=o>/</span><span class=n>api</span><span class=o>/</span><span class=n>users</span><span class=o>.</span><span class=n>setPhoto</span> <span class=o>-</span><span class=n>F</span> <span class=err>“</span><span class=n>image</span><span class=o>=</span><span class=err>@</span><span class=o>/</span><span class=n>home</span><span class=o>/</span><span class=n>mike</span><span class=o>/</span><span class=n>image</span><span class=o>.</span><span class=n>jpeg</span><span class=err>”</span> <span class=o>-</span><span class=n>F</span> <span class=err>“</span><span class=n>token</span><span class=o>=</span><span class=n>xoxp</span><span class=o>-</span><span class=mi>123</span><span class=err>–</span><span class=mi>456</span><span class=err>–</span><span class=mi>789</span><span class=err>”</span>
</span></span><span class=line><span class=cl><span class=c1># remove image</span>
</span></span><span class=line><span class=cl><span class=n>rm</span> <span class=o>/</span><span class=n>home</span><span class=o>/</span><span class=n>mike</span><span class=o>/</span><span class=n>image</span><span class=o>.</span><span class=n>jpeg</span>
</span></span></code></pre></div><h2 id=walkthrough>Walkthrough<a hidden class=anchor aria-hidden=true href=#walkthrough>#</a></h2><ul><li><code>#!/bin/bash</code> This is called the shebang, and it just tells the computer where the program bash lives. Any line that starts with a # means that is it a comment</li><li><code># */5 8–17 * * 1–5 slackProfilePic.sh</code> is a comment, but also an example of how the script can be ran by the computer over and over on a cadence by cron (more here). This specific cron entry will run every 5 mins between the hours of 8am and 5pm, Monday through Friday.</li><li><code>streamer -f jpeg -o /home/mike/image.jpeg -c /dev/video1</code> The capture line. Streamer is a program that captures audio/video. We are using it to just grab one frame from our webcam, and store it on disk in jpeg format. Read more about streamer here.</li><li><code>convert -blur 0x2 /home/mike/image.jpeg /home/mike/image.jpeg</code> The blur line (optional). This line was included to introduce a bit of blur to the newly captured image. I wanted to convey presence without sacrificing privacy. You may choose to change the amount of blur or do something completely different before uploading to Slack. Read more about convert here].</li><li><code>curl https://slack.com/api/users.setPhoto -F “image=@/home/mike/image.jpeg” -F “token=xoxp-123–456–789”</code> The upload line. Here, a curl request is used to send the new image to your Slack profile picture, using your Slack token. Much more can be found here about curl, and you can get your own token (and replace this one) here.</li><li><code>rm /home/mike/image.jpeg</code> The cleanup line. This line merely removes the local copy of the image we just uploaded to Slack.</li></ul><p>That’s it! I hope you found this useful, and are able to convey your online presence (or lack thereof) using the tools available through Linux.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.virtualbeck.com/tags/slack/>Slack</a></li><li><a href=https://blog.virtualbeck.com/tags/bash/>Bash</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://blog.virtualbeck.com/>Virtualbeck's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var topButton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(topButton.style.visibility="visible",topButton.style.opacity="1"):(topButton.style.visibility="hidden",topButton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>